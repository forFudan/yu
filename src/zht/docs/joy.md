# 卿雲爛兮

::: warning 注意
本方案基於宇浩拆分，爲 25.5 鍵亂序單編、繁簡通打方案。初始學習難度較大，請務必充分了解、分析、平衡其風險和收益後再決定是否學習使用。
:::

## 簡介

卿雲爛兮是宇浩輸入法的**亂序單編**衍生方案。方案名取自《尚書大傳》之「卿雲爛兮，糺縵縵兮」。取碼規則共兩條：

1. 依次取第一、二、三、末字根對應的編碼；
2. 不足四碼時，輸入一個補碼，即末根讀音。

::: info 公式化規則
所以，根據字根數量，有以下幾種形式。設首根爲 A，次根爲 B，三根爲 C，末根爲 Z，補碼爲 z。

1. 單根字：Zz
2. 雙根字：AZz
3. 三根字：ABZz
4. 多根字：ABCZ
:::

本方案的**補碼**，是末根的讀音首字母，**没有讀音**則默認爲 v。唯一的例外是高頻`口`字根，雖然讀音爲 k，但當作没有讀音處理。補碼亦可看作成末根的小碼。因此，本方案的字根既可視爲單編碼，也可視爲雙編碼。

::: tip 卿雲取碼歌訣  

一二三末取字根　單根成字即自身  
雙根便作首和末　三根首二同末存  
字根表中找編碼　二十五鍵莫看岔  
依次填入根字母　不足四碼加補碼  
補碼就是末根音　以下法則心裡記  
魚化ｖ來衣作ｉ　口補ｖ外無特例  
:::

| 末根補碼 | 規則                     | 舉例                      |
| :------- | :----------------------- | ------------------------- |
| v        | 頻率最高的字根，補碼爲 v | `口`                      |
| v        | 讀音爲 ㄩ 的，補碼爲 v   | `鱼魚雨禺予 月曰`         |
| i        | 讀音爲 ㄧ 的，補碼爲 i   | `一乙已乂弋亦衤 言羊用夭` |

字根是有限的，因此本方案依舊是純形方案，不是形音方案。

本方案**繁簡通打**，其關鍵數據如下：

- 簡體動態選重率 0.062%
- 繁體動態選重率 0.072%
- 繁簡混合動態選重率 0.106%
- 全碼速度當量 1.27，簡碼速度當量 1.28
- 單字平均雙手互擊率 65%，連續文本雙手互擊率 45%

詳見[《常見輸入法重碼數據》](./statistics.md)

以下爲本方案的字根圖。有可能作爲末根的生僻部首，圖上標註其讀音，以供參考：

[![yujoy](/yujoy.png)](/yujoy.png)

## 優缺點

本方案編碼**亂序**，200多個字根在25鍵上隨機出現，相比「光華」「星陳」兩個方案，優缺點都十分突出，故總結如下：

### 缺點

- 初始學習難度較大，同鍵位字根之間的字形關係不強，難以進行相似字形聯想記憶。
- 雙根字全碼爲三碼，對於大字集來説，靜態重碼較高。
- 雙根字需要按空格，無法四碼頂屏，因此拇指壓力增大，不適合腱鞘炎患者（可以使用全碼[整句模式](#整句模式)规避）。

### 優點

- 字形相近的部首在鍵盤上離散。因此，字根編碼中可以包含更多信息，使得規則的複雜度較低。
- 編碼隨機分佈，有利於分散雙手互擊，提高理論擊鍵速度當量。
- 補碼嚴格取字根讀音，對於日常使用拼音或注音的人比較友好。

## 整句模式

卿雲獨有全碼整句模式，用户在學習完全碼單字後，可以像全拼一樣進行輸入，不需要按空格。未來也不需要記憶簡碼和詞語。方案文件名爲 yujoy_fluency.schema.yaml。

1. 輸入時，直接輸入每個字的**全碼**，不需要在字中添加空格。完成輸入一個整句後，可以按空格上屏。
2. 可以通過空格鍵輸出簡碼和詞語。簡碼和官方詞庫**不參與**成句，故而最長爲四碼。
3. yuhao/yuhao.private.dict.yaml 中的用户自定義詞語**參與**成句，可以在整句模式下成句輸出。
4. 生僻字不參與成句(script_translator)，因此不會出現輸入過程中亂跳生僻字的情況。
5. 生僻字的順序固定，不會因爲曾經被用户選過，而排到常用字前。
6. 自動上屏候選區中靠前的字，使候選區的字不超過8個，防止窗口過長。該數字可在 yujoy_fluency.custom.yaml 中自定義。
7. 可以開啓字符集過濾（Ctrl+Shift+O 或輸入過程中按數字 0），只顯示「繁簡常用字」或「通規字」。
8. 可以開啓三重注解功能（Ctrl+Shift+C 或輸入過程中按斜槓 /）。
9. 可以使用 Z 鍵進行反查。

全碼整句模式的優點和缺點有：

- 因爲只輸入全碼單字，不需要額外記憶簡碼和詞語。
- 不需要在三碼和四碼後猶豫是否要加空格。
- 大拇指的負擔顯著降低。
- 速度當降低，達到了1.2584。
- 準確性方面，本模式選重率低於打詞，但高於簡碼單字派。
- 本模式不會出現打簡碼或打詞時的踩空回删現象。
- 本模式允許用户在最短時間内以最小成本實現雙盲打。
  因爲單字全碼輸入的原故，其準確性很高，出現重碼時也可以通過語句去重。  
  長期來看，本模式無法通過記憶換取額外確定性。  
  長期來看，本模式通過學習適應用户的用字用語習慣換取額外確定性。
- 碼長大約在 3.2 左右，略高於簡體優先簡碼派的 3.15。  
  低於繁簡通打簡碼派的 3.25。 高於詞派的 2.5 左右。  

## 學習路線

以下爲本方案學習路線：

1. 使用[字根練習程序](../practice/root_joy.md)學習字根編碼。
2. 使用[單字練習程序](../practice/char_joy.md)學習前1000高頻字全碼。
3. 使用[全碼整句模式](#整句模式)在[跟打器](http://yupad.pages.dev/)録入文章並強化記憶。
4. 使用[全碼整句模式](#整句模式)進行日常輸入，按 Z 鍵反查拆分和編碼。
5. 熟悉全碼後，決定是否轉用四碼定長模式（學習簡碼和詞語輸入）。

## 對比

以下是本方案同「光華」「星陳」在各個維度上的大致對比：

| 特點                      | 光華 | 星陳 | 卿雲 |
| :------------------------ | :--- | :--- | :--- |
| 使用最新版本宇浩拆分      | ✅    | ✅    | ✅    |
| 繁簡通打低極選重率 (0.2%) | ✅    | ✅    | ✅    |
| 字根字重複小碼            | ✅    | ✅    | ❌    |
| 兩根字取首根小碼          | ✅    | ✅    | ❌    |
| 大碼使用 Z 鍵             | ❌    | ❌    | ❌    |
| 小碼使用 Z 鍵             | ❌    | ✅    | ✅    |
| 相似字形字根同分區聚類    | ✅    | ❌    | ❌    |
| 相似字形字根同大碼聚類    | ❌    | ✅    | ❌    |
| 小碼 85% 使用拼音首字母   | ❌    | ✅    | ✅    |
| 小碼 99% 使用拼音首字母   | ❌    | ❌    | ✅    |
| 雙手互擊率 60%            | ❌    | ✅    | ✅    |
| 嚴格優化鍵位分佈          | ❌    | ✅    | ✅    |
| Z 鍵反查                  | ✅    | ✅    | ✅    |

## 作者

錢多多，爲主要策劃人、項目發起人、測試員、製圖員、皮膚設計者、社區維護者。

forFudan，提供字根排布計算和技術支持。
