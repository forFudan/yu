# 徐碼·爾雅輸入法

::: tip 更新

- 2022年3月31日 初版
- 2023年3月7日 本方案現在提供CJK所有漢字或部首的全字拆分，共計98446個字符，提供基於《古籍印刷通用字規範字形表》的繁體方案。
- 2023年5月5日 基於宇浩輸入法的拆分，添加對於 CJK-I 區603個漢字的支持以及全字拆分提示。
- 2023年9月15日 更新對 CJK-I 區622個漢字的支持以及全字拆分提示。反查可同時查詢繁簡漢字。可以使用快捷鍵 Shift + Ctrl + Y 打開和關閉輸入預測。

:::

## 介紹

### 徐碼·爾雅輸入法·2023年新版

徐碼·爾雅輸入法是由徐國銀先生發明的一種優秀的形碼輸入法方案，特點為雙編碼。優點包括：繁簡通打、支持CJK大字集、低重碼、全碼簡碼一致、字詞編碼一致等。官方網站：<http://xumax.cn/> 官方QQ群: 761401688

徐碼對比其他字形輸入法在不同漢字字符集下的單字全碼的重碼數量，[可參見此頁面](../docs/statistics.md)。

### 徐码教程

[點擊此處閱讀我所寫的《徐碼輸入法簡明教程》來瞭解和學習徐碼。](./learn.md)

<!-- [![徐碼字根圖](/resources/徐碼全字根圖.png)](/resources/徐碼全字根圖.png) -->

### Rime方案

本方案在2023年1月15日官方碼表基礎上進行深度定制。掛載於RIME平台（小狼毫、鼠須管）<https://rime.im/>。其具有以下特點：

- 提供至 CJK-I 區、兼容區、部首區超過99000個漢字的完整拆分、編碼提示、字集提示。
- 為簡化字和繁體字重新設置一級簡碼和二級簡碼。
- 支持二級簡碼快速標點符號輸入。
- 支持自定義字符集過濾生僻字。常用字約一萬字，包括 GB2312 漢字、國語常用字、其它常用漢字等。支持用戶自定義修改。
- 提供四碼只出單字功能，適合單字派。

## 安裝和使用

### Windows / Macos / 安卓安装方法

在安裝了 Rime（小狼毫、鼠須管、同文）後，將 [/schema](https://github.com/forFudan/xuma/tree/main/schema) 文件夾下的所有文件複製到 Rime 目錄下。同時在 default.custom.yaml 文件中加入以下內容：

```yaml
patch:
  schema_list:
    - schema: xuma_forfudan
```

點擊「部署」之後即可使用。

### 具體文件介绍

文件介紹：

- xuma_forfudan.schema.yaml 簡體方案文件
- xuma_forfudan.dict.yaml 簡體字典文件
- xuma_forfudan.words.dict.yaml 拓展詞庫
- rime.lua 腳本設定
- lua/forfudan_freq_filter.lua 字符集過濾腳本。可添加自定字符。
- opencc/... 單字拆分表
- build/clover... 已編譯好的四葉草拼音文件。或者自行安裝。<https://github.com/fkxxyz/rime-cloverpinyin>

## 方案特点

### 提示快捷键

输入`help`可显示快捷键提示。

### 单字拆分三重注解

提供至CJK-H区、兼容区、部首区超过98000个汉字的完整拆分、编码提示、字集提示。拆分提示中包括三重注解：

1. 该汉字的完整拆分（所有部件）。
2. 该汉字的全码。使用大小写字母区分大小码，便于初学者分辨主、副根字。
3. 该汉字所在的字符集（GB2312，GBK，CJK，CJK A 到 H 区，兼容字等）。

用户还可通过「Shift+Ctrl+C」切换拆分状态。

### 单字简码调整

本方案根据简化字体系下的字频数据，调整了一级、二级、三级单字简码。其中，一级简码调整如下（共8个）：

- A「以」改为「能」。否则「能」字需要`asv`三码出字。
- C「发」改为「好」。因为「好」字频更高。且让出了二简位给同样高频的「她」字。
- D「那」改为「对」。否则高频「对」字需要`dico`四码出字。
- H「在」改为「有」。否则高频「有」字需要`hsv`三码出字。
- M「同」改为「见」。否则高频「见」字需要`mve`三码出字。
- N「国」改为「当」。否则高频「当」字需要`nbu`三码出字。
- S「得」改为「然」。
- Z「为」改为「没」。否则「没」字需要三码出字，且`zqs`会在左手小指，非常不便。

二级简码也作部分调整，比如：

- xq 码位由「将」改为「次」，否则需要`xqqs`四码出字。

特别的，部分字频不高的繁体字和传承字字根移到三选。这样可以腾出一个二简码位用于高频字。例如：

- 「艮0.00%」移到三选，同时将码位让给「司0.05%」
- 「巳0.00%」移到三选，同时将码位让给「通0.06%」
- 「殳0.00%」移到三选，同时将码位让给「解0.07%」
- 「冊0.00%」移到三选，同时将码位让给「内0.08%」
- 「韋0.00%」移到三选，同时将码位让给「尽0.04%」
- 「戊0.00%」移到三选，同时将码位让给「太0.10%」
- 「缶0.00%」移到三选，同时将码位让给「年0.18%」
- 「歹0.00%」移到三选，同时将码位让给「五0.06%」
- 「臣0.01%」移到三选，同时将码位让给「打0.15%」
- 「瓜0.01%」移到三选，同时将码位让给「后0.34%」
- 「虫0.01%」移到三选，同时将码位让给「些0.20%」
- 「申0.00%」移到三选，同时将码位让给「明0.15%」
- 「烏0.01%」移到三选，同时将码位让给「今0.07%」
- 「馬0.09%」移到三选，同时将码位让给「现0.22%」
- 「弋0.00%」移到三选，同时将码位让给「式0.03%」
- 「匕0.00%」移到三选，同时将码位让给「条0.05%」
- 「舟0.00%」移到三选，同时将码位让给「种0.14%」
- 「髟0.00%」移到三选，同时将码位让给「妻0.01%」

同时，我们为所有字根增加**替身码**，重复其小码即可实现输入。例如：

- 艮 `bgg`
- 巳 `dss`
- 殳 `qss`

### 词语简码调整

本方案根据简化字体系下的词频，调整了一级、二级词语简码。

值得注意的是，在官方码表中，二简二选词语取两个字首码。这导致词语全码简码不一致。在本方案中，统一调整取消这种取码方式。

关于简码词的设置有一些原则：

- 词频越靠前，设置简词的可能性越高。
- 如果简词的第一个字在二简一选位，则优先放在二简。例：「毕竟」，因为「毕」是二简字，所以「毕竟」也设成二简而不是一简。
- 接上，如果简词的频率过高，仍然设在一简。例：「如果」，虽然「如」是二简字，但是「如果」的词频太高，所以放在了一简位上。

一简码位都有二选简词和三选简词。

二简码位不一定有两个简词。如果一个词没有重码，那么将它设在二简位只省了一个按键，还会增加记忆负担，故而二简词只在以下情况下会设置：

1. 一个词的词频非常高，故而提供简码位。
2. 一个词的全码输入时不符合人体工学。

### 标点符号二简快速输入

对于一些使用频率不高的二简码位，提供标点符号的快速输入，包括：

- 「」，单方引号，aj
- 『』，双方引号，ak
- “”，双圆引号，ah
- ‘’，单圆引号，ai
- 〔〕，六角引号，al
- ：，冒号，mm
- 《》，书名号，sm
- ！，感叹号，gg
- ？，问号，ww
- ——，破折号，pp
- ……，省略号，sl
- ×，隐讳符，yh
- □，缺字符，qz
- 々，叠字符，dz，也可以通过 qwu 输入。
- ·，间隔符，yy
- §，章节号，zj
- 、，顿号，nn
- ，，逗号，oo
- 。，句号，jj
- 全角空格，dl

### 增广常用字符集

本方案使用了自定的常用字符，将常用字一网打尽，避免了 RIME 内置字符集「GB2312字太少，GBK字太多」的问题。包括了以下一万个左右的字符：

- GB2312 全部字符
- 台湾的「国字常用字」
- 注音符号
- 「〇」符号
- 「镕」等 GB2312 未收录的常用简化字
- 「喆裏墻粧嫺綫綉滙峯」等「国语常用字」未收录的常用繁体字
- 「咲雫乭」等常见日韩汉字

### 一键切换字符集

在输入过程中，用户可选择两种切换字集的方式：

- 通过「Shift+Ctrl+O」在常用字符集和CJK大字符集之间进行切换（过滤）。
- 通过「Shift+Ctrl+I」将常用字符集优先显示（优先）。

用户还可通过「Shift+Ctrl+F」进行简入繁出输入。

### 使用 ` 键引导四叶草拼音输入和反查

按下 ` 键，可以随时使用四叶草拼音输入词语，并实现反查。四叶草拼音：<https://github.com/fkxxyz/rime-cloverpinyin>

### 全码词语屏蔽

一键屏蔽四码词语，同时保留简码词。热键为「Shift+Ctrl+D」。适合保留简码词的全码单字派。
